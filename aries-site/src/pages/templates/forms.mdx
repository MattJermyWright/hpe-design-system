import {
  ChangePasswordExample,
  CustomizeExample,
  FilterExample,
  RequiredFieldsExample,
  PayExample,
  SettingsExample,
  ShippingExample,
  SignInExample,
  SimpleSignUpExample,
  SignUpExample,
  SingleFormFieldExample,
  SortExample,
} from '../../examples';
import { ExampleImagePreview } from '../../components';
import { Example } from '../../layouts';

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SimpleSignUpExample.js"
  docs="https://v2.grommet.io/form?theme=hpe"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=1807%3A734"
>
  <SimpleSignUpExample />
</Example>

## General guidance

Good forms make it intuitive for the user to understand what is required versus what is optional. Adding too much on the form - even if the intention is to be helpful - can create clutter and confusion.

Before adding an element to a form that you would think would be helpful to a user, ask yourself how likely the user is likely commit that error at all! If they are unlikely to commit an error, do not add that element.

Some forms, such as signup and signin forms need no explanations. And while we aim for specific field labels, you can choose to use a placeholder text inside fields where the user might need some extra help in deciding how to format their answer.

### Usage

Forms don't need to be a tedious task for users to complete, as they often come to be. It is important to ease as much of this effort as possible when building a Form. Making forms simple to complete leads to increase in form completion.

**Follow these guidelines when creating a form:**

- Use as few fields as possible
- Wrap all input elements within a FormField  `<FormField label="Username"><TextInput /></FormField>`
- Fill in default values for as many fields as possible.
- Reveal fields progressively so the user is not overwhelmed.
- Write helpful placeholder text inside the fields.
- Use placeholder text as an added visual indication of expected input value format
- Don't list rejection criteria that the user is unlikely to input (ex. double hyphens, starting with a space, etc.). Only alert them when they type the error.
- There may be cases where optional fields may be appropriate. In these forms, clearly denote which fields are optional vs. required. This way, users won't be forced to infer anything - but can instead stay focused on completing their task.
- If the user will likely have doubts about how to complete an input, include helpful text below the field, such as [password requirements](#signup) or [additional resources](#customize) on a field's context.
- Don't repeat the field label as placeholder text.
- Don't use generic labels on buttons, such as “Yes," or "No." Instead use labels such as "Save," "Publish," "Create Project," etc.


### Required vs. optional fields

- When possible, restrict forms only to fields that are required in order to keep them concise.
- For [single form fields](#single-required-formfield) (ex: delete confirmation request), use an asterisk to denote that it is a "required" field. This can avoid user confusion and reduce the chance of "required" input error.
- Don't use red asterisks because this has shown to actually decrease success in filling out the form.
- Try to limit your optional fields to no more than two.

<ExampleImagePreview
  label="Required and Optional Fields Example"
  src="/required&optional-Fields-example.png"
  href="#required-and-optional-fields"
  alt="HPE Design System Form example where required and optional fields are used."


**Forms where "asterisk" and "optional" can be skipped:**

A login/registration form, which typically shows two to three required fields do not need to be annotated in any way - the form is short and the necessity of completing the fields is relatively obvious.

For login/registration forms, apply `required={{ indicator: false }}` to the FormFields to remove the required indicator.

<ExampleImagePreview
  label="Forms where 'asterisk' and 'optional' can be skipped"
  src="/form-example-nonrequired.png"
  href="#sign-in"
  alt="HPE Design System Form where required and optional can be skipped"
/>

- Forms with minimal fields are optimal, but occasionally, capturing extra information would be highly beneficial for the user. The following are some options for addressing these cases:

  - Create the form the optimal way; with only the minimum required fields so that the user can focus on completing their task. Separately, in a preferences or settings dashboard, for example, provide a form that allows the user to add helpful, optional information at another time. An example of a helpful but not required field could be asking for someone's official title or role. If it is not necessary to capture this information right away on a sign-in form, offer this "role" or "title" field in profile settings.

  - However, add the optional field if there is compelling evidence that the user’s experience would be greatly improved if they could input this extra information in this initial form. Ensure to mark the field as optional.

### Using help text

In most cases, the FormField label should be clear enough to instruct the user how to complete a field. However, if help text is required, ensure that it is kept brief and precise.

Help text may be relevant for cases such as [password requirements](#sign-up) or [additional resources](#customize) on a field's context.

### Capitalization in forms

Writing standards contribute to the voice, tone, and grammatical accuracy that inform the experiences we create. These standards are aligned with HPE Brand.

Within a form, you should:

- Write in sentence case (capitalize the first letter and all following letters should be lowercase).

### Button placement and labeling

- Place the submit, reset, and cancel buttons at the bottom left of the form. [See responsive button behavior](https://design-system.hpe.design/components/button#responsiveness).

Button labels should be specific to the action of the button. For example, a [sign-up form](#sign-up) may have a submit button with label "Sign Up". Alternately, a [password change form](#change-password) may have a button with label "Update Password".

Button label specificity provides users confidence in the action they are performing.


### User-entered input

There should be few restrictions on user-entered input.

- Resource naming should allow for spaces, punctional characters, unicode characters.
  - Examples: Björk Guðmundsdóttir, 联想, John Q. Public, etc.
- User-entered input needs to be encoded to prevent [SQL injection](https://www.w3schools.com/sql/sql_injection.asp) and [XSS attacks](https://en.wikipedia.org/wiki/Cross-site_scripting).

### Form submission

Visual feedback is important to instill confidence in a user after form submission. 


**On submission, your form should:**

- In the case of an error, focus should be placed on the input element where the error occurred.
- Provide user with indication that form was submitted successfully (e.g. notification, success page, green checkmark, etc.)
- List all errors and the corrective action the user must take. 
- Place inline when possible. Otherwise, list above the submit button.
- Allow user to continue navigating through the application immediately

Never force the user to wait for post-submission processing to complete before they can continue using an application.

### Terms and conditions
Users must actively check a box next to a statement that shows they have agreed to the Terms and Conditions when signing up for an account. For easy access and quick reference, the legal agreement is a simple link in the text.

### Accessibility

Form inputs must be accompanied by a label that identifies itself to screen readers. Placing all inputs within a Grommet FormField and applying the guidance below play a big role in ensuring the inputs are accessible.

**FormFields must include:**

- A "for" property that matches the `id` of its child input. If using Grommet, this is applied with the `htmlFor` property.

```
<FormField
  label="Username"
  htmlFor="example-username"
  name="example-username"
  >
   <TextInput id="example-username" name="example-username" />
</FormField>
```

- A `name` property applied on both the FormField and its child input element.
- A clear, concise label.
- Ensure that users can tab through fields and buttons in a logical order and not have to use arrow keys.

[View the accessibility guidance page if you'd like to use simulators, testing tools, and other resources](https://design-system.hpe.design/foundation/accessibility?q=acce).

**FormFields need to have:**

- A "for" property that matches the id of its child input. If using Grommet, this is applied with the htmlFor prop.
- A "name" property applied on both the FormField and its child input element
- A clear, concise label

### Character counter

**When to use**

In cases where the user is given an opportunity to express themselves or would likely exceed a field's character limit. Examples include some description fields, feedback, feature requests, reporting issues, etc.

**Guidance**

- Place the character counter at the bottom right of the field.
- See guidance on [character limits for fields](/components/tag#anatomy). Note that your backend may have character limitations. When you can choose the character limits, however, set a generous number to avoid frustrating the user. A suggestion to ensure your limit is user-friendly is to check the analytics to see how long it is taking your users to complete this task. Longer than usual time could indicate the character limits are too low. Increase accordingly.
- Use a numerator/denominator format. Ex. 0/128.
- Show the progression in the numerator as the user is typing. Ex. 52/128 if the user has typed 52 characters, 53/128 when they type an extra character, 54/128, 55/128, etc.
- Use default text styling.
- Make the field roughly the same size as the character limit.
- Red highlight the field when the user meets the character limitation.

**Accessibility**

- Announce the max character allowed before the user begins typing.
- Announce when the user has typed 50% of the max allowed.


## Sign up

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SignUpExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=1807%3A734"
>
  <SignUpExample />
</Example>

## Sign in

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SignInExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A499"
>
  <SignInExample />
</Example>

## Filter

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/FilterExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A527"
>
  <FilterExample />
</Example>

## Sort

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SortExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A562"
>
  <SortExample />
</Example>

## Change password

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/ChangePasswordExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A542"
>
  <ChangePasswordExample />
</Example>

## Settings

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SettingsExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A459"
>
  <SettingsExample />
</Example>

## Pay

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/PayExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A431"
>
  <PayExample />
</Example>

## Shipping

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/ShippingExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A382"
>
  <ShippingExample />
</Example>

## Required and optional fields

For standard forms, use an asterisk(\*) to indicate required field/controls.

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/RequiredFieldsExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=2668%3A3582"
>
  <RequiredFieldsExample />
</Example>

## Single required FormField

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/SingleFormFieldExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=5942%3A12303"
>
  <SingleFormFieldExample />
</Example>

## Customize

<Example
  code="https://raw.githubusercontent.com/grommet/hpe-design-system/master/aries-site/src/examples/templates/forms/CustomizeExample.js"
  figma="https://www.figma.com/file/3fkwBelW5UsCbfwdDCJkT8/HPE-Form-Templates?node-id=54%3A608"
>
  <CustomizeExample />
</Example>
